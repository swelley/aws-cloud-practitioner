# ğŸª£ S3 â€“ Amazon Simple Storage Service

## O que Ã©?

* S3 Ã© o serviÃ§o de **armazenamento de objetos** da AWS, projetado para escalar automaticamente conforme cresce a quantidade de dados.
* Ideal para guardar arquivos estÃ¡ticos como imagens, vÃ­deos, documentos, backups, logs, e **hospedar sites estÃ¡ticos**.
* Cada arquivo (objeto) Ã© armazenado dentro de um **bucket**, que funciona como um contÃªiner lÃ³gico.

---

## ğŸ“ Bucket â€“ ExplicaÃ§Ã£o Detalhada

* **Bucket** Ã© o recipiente principal onde vocÃª armazena seus objetos no S3.
* Cada bucket pertence a uma Ãºnica conta AWS e a uma regiÃ£o especÃ­fica, mas o nome deve ser **Ãºnico globalmente**.
* **CriaÃ§Ã£o**:

  1. Escolha um nome descritivo e sem caracteres especiais (apenas letras minÃºsculas, nÃºmeros e hÃ­fens).
  2. Determine a **regiÃ£o** mais prÃ³xima dos seus usuÃ¡rios para reduzir latÃªncia e custo.
* **Regras de nomeaÃ§Ã£o**:

  * Deve ter entre 3 e 63 caracteres.
  * ComeÃ§ar e terminar com letra ou nÃºmero.
  * NÃ£o pode conter espaÃ§os, sublinhados (\_), ponto (.) no inÃ­cio ou fim, ou sequÃªncia de pontos.
* **SeguranÃ§a e boas prÃ¡ticas**:

  * Mantenha buckets **privados** por padrÃ£o.
  * Ative **Block Public Access** para evitar exposiÃ§Ã£o acidental.
  * Use **tags** para identificar ambiente (dev, test, prod) e responsÃ¡vel.
* **Dicas para a prova**:

  * Entenda que o bucket age como front-end para APIs RESTful do S3.
  * Saiba que buckets nÃ£o possuem hierarquia real de pastas; Ã© apenas convenÃ§Ã£o de nome.
  * Que ao excluir um bucket, ele deve estar vazio antes de poder ser deletado.

---
ğŸ—’ï¸ **Analogia simplificada**

Para quem estÃ¡ comeÃ§ando do zero, pense no S3 assim:

Bucket â‰ˆ Pasta raiz de um sistema de arquivos (ex: C:\fotos\... no Windows ou / no Linux).

Objeto â‰ˆ Arquivo dentro dessa pasta.

Assim como vocÃª nÃ£o pode salvar arquivos fora de C:\ ou /, no S3 vocÃª sÃ³ armazena objetos dentro de um bucket.

NÃ£o existe hierarquia real de pastas â€” tudo sÃ£o objetos com nomes Ãºnicos (chaves), onde docs/relatorio.pdf Ã© apenas um prefixo de nome.

Dica de prova: Entenda bem essa analogia para diferenciar buckets de objetos e para lembrar das regras de nomeaÃ§Ã£o e exclusÃ£o (um bucket deve estar vazio para ser removido).

---
## Principais conceitos

### ğŸ“¦ Objeto

* Um **objeto** no S3 Ã© a menor unidade de dados armazenada.
* Ele Ã© composto por:

  * **Dados do arquivo** propriamente dito (ex: PDF, imagem, vÃ­deo, log).
  * **Metadados**: informaÃ§Ãµes como tipo do conteÃºdo (ex: `image/jpeg`), data de modificaÃ§Ã£o, codificaÃ§Ã£o, etc.
  * **Chave (Key)**: o nome exclusivo do objeto dentro do bucket. Pode conter barras para simular pastas (ex: `fotos/viagem/paris.jpg`).
  * **VersÃ£o (opcional)**: se o bucket tiver versionamento ativado, cada alteraÃ§Ã£o cria uma nova versÃ£o do objeto.

ğŸ’¡ **Importante saber:**

* O nome do objeto pode ser usado como um identificador exclusivo.
* Objetos podem ser acessados diretamente por URL (se pÃºblicos ou com permissÃµes configuradas).
* O tamanho mÃ¡ximo de um Ãºnico objeto Ã© de **5 TB**.
* Objetos nunca sÃ£o editados diretamente: uma nova versÃ£o deve ser enviada.

---

### ğŸ” PermissÃµes

* Controle de acesso:

  * **ACLs (Access Control Lists)**: permissÃµes em nÃ­vel de objeto ou bucket.
  * **Bucket Policy**: polÃ­tica JSON aplicada ao bucket.
  * **IAM Policy**: associada a usuÃ¡rios, grupos ou funÃ§Ãµes.

### â™»ï¸ Versionamento

* MantÃ©m **vÃ¡rias versÃµes** de um mesmo objeto, permitindo recuperaÃ§Ã£o de versÃµes anteriores.
* Ãštil em: backup, auditoria e recuperaÃ§Ã£o de dados apagados.

### ğŸ§Š Classes de armazenamento

| Classe                         | Uso recomendado                                  | Custo       |
| ------------------------------ | ------------------------------------------------ | ----------- |
| **Standard**                   | Acesso frequente                                 | Alto        |
| **Standard-IA**                | Acesso nÃ£o frequente                             | MÃ©dio       |
| **One Zone-IA**                | Acesso nÃ£o frequente, menor custo                | MÃ©dio-Baixo |
| **Glacier Instant Retrieval**  | Arquivamento com acesso rÃ¡pido                   | Baixo       |
| **Glacier Flexible Retrieval** | Arquivamento com recuperaÃ§Ã£o em minutos ou horas | Muito baixo |
| **Glacier Deep Archive**       | Arquivamento de longo prazo                      | MÃ­nimo      |

âœ… **Dica**: Defina **lifecycle policies** para mover objetos automaticamente entre classes conforme envelhecem.

---

## ğŸ§  Curiosidades e boas prÃ¡ticas

* Alta durabilidade de **11 9's** (99.999999999%) graÃ§as Ã  replicaÃ§Ã£o automÃ¡tica.
* Bucket pode armazenar atÃ© **5 TB** por objeto.
* O nÃºmero padrÃ£o de buckets por conta Ã© 100; lembre-se de planejar a organizaÃ§Ã£o.
* Use **Transfer Acceleration** para uploads mais rÃ¡pidos em grandes distÃ¢ncias.
* **Cache** de metadados: solicitaÃ§Ãµes GET podem ser aceleradas com CloudFront.
* Replique dados automaticamente entre regiÃµes com **S3 Cross-Region Replication** (CRR).

---

## ğŸ’» PrÃ¡tica com AWS CLI

```bash
# Criar um bucket
aws s3 mb s3://meu-bucket-exemplo --region sa-east-1

# Configurar Block Public Access (todas as configuraÃ§Ãµes)
aws s3api put-public-access-block \
  --bucket meu-bucket-exemplo \
  --public-access-block-configuration BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true

# Enviar um arquivo para o bucket
aws s3 cp local.txt s3://meu-bucket-exemplo/pasta/local.txt

# Listar arquivos de um bucket
aws s3 ls s3://meu-bucket-exemplo --recursive

# Ativar versionamento no bucket
aws s3api put-bucket-versioning \
  --bucket meu-bucket-exemplo \
  --versioning-configuration Status=Enabled

# Definir lifecycle para mover objetos para Glacier apÃ³s 30 dias
aws s3api put-bucket-lifecycle-configuration \
  --bucket meu-bucket-exemplo \
  --lifecycle-configuration file://lifecycle.json
```

---

> ğŸŒ± **Dica extra**: Teste sempre polÃ­ticas e lifecycle em um bucket de desenvolvimento antes de aplicar em produÃ§Ã£o.
